(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{88505:(e,t,i)=>{Promise.resolve().then(i.bind(i,79443))},79443:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>D});var s=i(95155),a=i(12115),r=i(88280),l=i(29159),n=i.n(l),d=i(41379),x=i(9723),c=i(46742),u=i(18049),p=i(19589),o=i(30042),A=i(1672),h=i(37488),j=i(62516),m=i(9796),f=i(72570);function y(e,t){return e.map(e=>F(e,t))}function F(e,t){return e.reduce((e,i,s)=>e+i*t[s],0)}var g=i(77203),b=i(18435),S=i(67495),v=i(89801);let q=e=>{let{data:t}=e;return(0,s.jsx)(g.A,{data:t,xField:"xAxis",yField:"yAxis",label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},meta:{xAxis:{alias:"Feature"},yAxis:{alias:"Coefficient"}}})},C=e=>{let{data:t}=e;return(0,s.jsx)(g.A,{data:t,xField:"xAxis",yField:"yAxis",label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},meta:{xAxis:{alias:"Feature"},yAxis:{alias:"Standard Error"}}})},E=e=>{let{data:t}=e;return(0,s.jsx)(g.A,{data:t,xField:"xAxis",yField:"yAxis",label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},meta:{xAxis:{alias:"Feature"},yAxis:{alias:"t-Value"}}})},k=e=>{let{data:t}=e;return(0,s.jsx)(g.A,{data:t,xField:"xAxis",yField:"yAxis",label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},meta:{xAxis:{alias:"Feature"},yAxis:{alias:"p-Value"}}})},w=e=>{let{data:t}=e;return(0,s.jsx)(b.A,{data:t,xField:"xAxis",yField:"yAxis",point:{size:4,shape:"circle"},meta:{xAxis:{alias:"Sample"},yAxis:{alias:"Residual"}}})},M=e=>{let{data:t}=e;return(0,s.jsx)(g.A,{data:t,xField:"xAxis",yField:"yAxis",barStyle:{fill:"#8884d8"},errorField:"error",meta:{xAxis:{alias:"Feature"},yAxis:{alias:"Coefficient"},error:{alias:"Confidence Interval"}}})},T=e=>{let{data:t}=e;return(0,s.jsxs)(h.A,{gutter:16,children:[(0,s.jsx)(j.A,{span:4,children:(0,s.jsx)(v.A,{title:"Intercept",value:t.intercept})}),(0,s.jsx)(j.A,{span:4,children:(0,s.jsx)(v.A,{title:"R\xb2",value:t.rSquared})}),(0,s.jsx)(j.A,{span:4,children:(0,s.jsx)(v.A,{title:"Adjusted R\xb2",value:t.adjustedRSquared})}),(0,s.jsx)(j.A,{span:4,children:(0,s.jsx)(v.A,{title:"F Statistic",value:t.fStatistic})}),(0,s.jsx)(j.A,{span:4,children:(0,s.jsx)(v.A,{title:"Durbin-Watson",value:t.durbinWatson})})]})},V=e=>{let{data:t}=e,i=Object.keys(t[0]),a=i.pop()||"";return(0,s.jsx)(h.A,{gutter:16,children:i.map((e,i)=>(0,s.jsx)(j.A,{span:8,children:(0,s.jsx)(p.A,{title:"".concat(e," vs ").concat(a),children:(0,s.jsx)(S.A,{data:t,xField:e,yField:a,pointStyle:{fillOpacity:.8},meta:{[e]:{alias:e},[a]:{alias:a}}})})},i))})},N=e=>{let{data:t}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)(p.A,{title:"单值指标",children:(0,s.jsx)(T,{data:t})}),(0,s.jsxs)(h.A,{gutter:16,style:{marginTop:16},children:[(0,s.jsx)(j.A,{span:12,children:(0,s.jsx)(p.A,{title:"回归系数",children:(0,s.jsx)(q,{data:t.coefficients})})}),(0,s.jsx)(j.A,{span:12,children:(0,s.jsx)(p.A,{title:"标准误差",children:(0,s.jsx)(C,{data:t.standardErrors})})})]}),(0,s.jsxs)(h.A,{gutter:16,style:{marginTop:16},children:[(0,s.jsx)(j.A,{span:12,children:(0,s.jsx)(p.A,{title:"t 值",children:(0,s.jsx)(E,{data:t.tValues})})}),(0,s.jsx)(j.A,{span:12,children:(0,s.jsx)(p.A,{title:"p 值",children:(0,s.jsx)(k,{data:t.pValues})})})]}),(0,s.jsxs)(h.A,{gutter:16,style:{marginTop:16},children:[(0,s.jsx)(j.A,{span:12,children:(0,s.jsx)(p.A,{title:"残差",children:(0,s.jsx)(w,{data:t.residuals})})}),(0,s.jsx)(j.A,{span:12,children:(0,s.jsx)(p.A,{title:"置信区间",children:(0,s.jsx)(M,{data:t.confidenceIntervals})})})]}),(0,s.jsx)(p.A,{title:"散点图矩阵",children:(0,s.jsx)(V,{data:t.scatterMatrixData||[]})})]})},{Option:R}=x.A,{Title:O,Text:_}=c.A,I=()=>{let[e,t]=(0,a.useState)([]),[i,l]=(0,a.useState)([]),[c,g]=(0,a.useState)(""),[b,S]=(0,a.useState)([]),[v,q]=(0,a.useState)(null),[C,E]=(0,a.useState)(null),[k,w]=u.Ay.useMessage(),{getRootProps:M,getInputProps:T,isDragActive:V}=(0,r.VB)({onDrop:e=>{let i=e[0];E(i.name),n().parse(i,{header:!0,dynamicTyping:!0,complete:e=>{if(e.errors.length>0){k.error("文件解析失败，请检查文件格式。");return}let i=e.meta.fields||[];l(i),t(e.data.map(e=>i.map(t=>e[t]))),k.success("文件上传成功！")},error:()=>{k.error("文件解析失败，请检查文件格式。")}})}}),I=e.slice(0,100).map((e,t)=>{let s={key:t};return i.forEach((t,i)=>{s[t]=e[i]}),s});return(0,s.jsxs)("div",{style:{padding:"24px"},children:[w,(0,s.jsxs)(p.A,{title:"回归分析工具",bordered:!1,style:{boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},children:[(0,s.jsxs)("div",{...M(),style:{border:"2px dashed #1890ff",padding:"20px",textAlign:"center",borderRadius:"8px",cursor:"pointer",backgroundColor:V?"#e6f7ff":C?"#f6ffed":"#fff",borderColor:C?"#52c41a":"#1890ff"},children:[(0,s.jsx)("input",{...T()}),(0,s.jsx)(d.A,{style:{fontSize:"24px",color:C?"#52c41a":"#1890ff"}}),(0,s.jsx)("p",{children:C?"已上传文件: ".concat(C):V?"释放文件以上传":"拖拽或点击上传 CSV 文件"})]}),i.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{style:{marginTop:"24px"},items:[{key:"preview",label:"预览数据（前100条）",children:(0,s.jsx)(A.A,{dataSource:I,columns:i.map(e=>({title:e,dataIndex:e,key:e})),pagination:!1,scroll:{x:!0},size:"small"})}]}),(0,s.jsxs)("div",{style:{marginTop:"24px"},children:[(0,s.jsx)(O,{level:4,children:"选择变量"}),(0,s.jsxs)(h.A,{gutter:16,children:[(0,s.jsxs)(j.A,{span:12,children:[(0,s.jsx)(_,{strong:!0,children:"因变量:"}),(0,s.jsx)(x.A,{placeholder:"选择因变量",style:{width:"100%",marginTop:"8px"},value:c,onChange:e=>{if(b.includes(e)){k.warning('"'.concat(e,'" 已被选为自变量，不能同时作为因变量！'));return}g(e)},children:i.map(e=>(0,s.jsx)(R,{value:e,disabled:b.includes(e),children:(0,s.jsx)(m.A,{title:b.includes(e)?'"'.concat(e,'" 已被选为自变量，不能同时作为因变量！'):null,children:e})},e))})]}),(0,s.jsxs)(j.A,{span:12,children:[(0,s.jsx)(_,{strong:!0,children:"自变量:"}),(0,s.jsx)(x.A,{mode:"multiple",placeholder:"选择自变量",style:{width:"100%",marginTop:"8px"},value:b,onChange:e=>{if(e.includes(c)){k.warning('"'.concat(c,'" 已被选为因变量，不能同时作为自变量！'));return}S(e)},children:i.map(e=>(0,s.jsx)(R,{value:e,disabled:e===c,children:(0,s.jsx)(m.A,{title:e===c?'"'.concat(e,'" 已被选为因变量，不能同时作为自变量！'):null,children:e})},e))})]})]}),(0,s.jsx)(f.Ay,{type:"primary",onClick:()=>{if(!c||0===b.length){k.warning("请选择因变量和至少一个自变量！");return}let t=i.indexOf(c),s=b.map(e=>i.indexOf(e)),a=e.map(e=>s.map(t=>e[t])),r=e.map(e=>e[t]),l=function(e,t){let i=e.map((e,i)=>({xAxis:e,yAxis:t.coefficients[i]})),s=e.map((e,i)=>({xAxis:e,yAxis:t.standardErrors[i]})),a=e.map((e,i)=>({xAxis:e,yAxis:t.tValues[i]})),r=e.map((e,i)=>({xAxis:e,yAxis:t.pValues[i]})),l=t.residuals.map((e,t)=>({xAxis:"Sample ".concat(t+1),yAxis:e})),n=e.map((e,i)=>({xAxis:e,yAxis:t.vif[i]})),d=e.map((e,i)=>({xAxis:e,yAxis:t.coefficients[i],error:1.96*t.standardErrors[i]}));return{coefficients:i,intercept:Number(t.intercept.toFixed(3)),rSquared:Number(t.rSquared.toFixed(3)),adjustedRSquared:Number(t.adjustedRSquared.toFixed(3)),standardErrors:s,tValues:a,pValues:r,fStatistic:Number(t.fStatistic.toFixed(3)),residuals:l,durbinWatson:Number(t.durbinWatson.toFixed(3)),vif:n,confidenceIntervals:d}}(b,function e(t,i){let s=t.length,a=t[0].length,r=t.map(e=>[1,...e]),l=r[0].map((e,t)=>r.map(e=>e[t])),n=l.map(e=>r[0].map((t,i)=>F(e,r.map(e=>e[i])))),d=y(l,i),x=function(e){let t=e.length,i=e.map((e,i)=>[...e,...Array(t).fill(0).map((e,t)=>i===t?1:0)]);for(let e=0;e<t;e++){let s=i[e][e];for(let a=0;a<2*t;a++)i[e][a]/=s;for(let s=0;s<t;s++)if(s!==e){let a=i[s][e];for(let r=0;r<2*t;r++)i[s][r]-=a*i[e][r]}}return i.map(e=>e.slice(t))}(n),c=y(x,d),u=r.map(e=>F(e,c)),p=i.map((e,t)=>e-u[t]),o=i.reduce((e,t)=>e+(t-i.reduce((e,t)=>e+t,0)/i.length)**2,0),A=p.reduce((e,t)=>e+t**2,0),h=1-A/o,j=A/(s-a-1),m=x.map((e,t)=>Math.sqrt(e[t]*j)),f=c.map((e,t)=>e/m[t]),g=f.map(e=>{var t,i;return 2*(1-.5*(1+function(e){let t=1/(1+.3275911*Math.abs(e)),i=1-((((1.061405429*t+-1.453152027)*t+1.421413741)*t+-.284496736)*t+.254829592)*t*Math.exp(-e*e);return Math.sign(e)*i}(((t=Math.abs(e))+Math.sqrt(t*t+(i=s-a-1)))/(2*Math.sqrt(t*t+i))-.5)))}),b=p.reduce((e,t,i)=>0===i?e:e+(t-p[i-1])**2,0)/A,S=t[0].map((i,s)=>{let a=t.map(e=>e[s]);return 1/(1-e(t.map(e=>e.filter((e,t)=>t!==s)),a).rSquared)});return{coefficients:c.slice(1),intercept:c[0],rSquared:h,adjustedRSquared:1-(s-1)/(s-a-1)*(1-h),standardErrors:m,tValues:f,pValues:g,fStatistic:h/a/((1-h)/(s-a-1)),residuals:p,durbinWatson:b,vif:S}}(a,r)),n=function(e,t,i,s){if(e.length!==t.length||e[0].length!==i.length)throw Error("输入数据格式不匹配");return e.map((e,a)=>{let r={};return i.forEach((t,i)=>{r[t]=e[i]}),r[s]=t[a],r})}(a,r,b,c);l.scatterMatrixData=n,q(l)},style:{marginTop:"16px"},children:"执行回归分析"})]})]}),v&&(0,s.jsx)("div",{style:{marginTop:"24px"},children:(0,s.jsx)(N,{data:v})})]})]})};function D(){return(0,s.jsx)(I,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[935,826,409,441,517,358],()=>t(88505)),_N_E=e.O()}]);